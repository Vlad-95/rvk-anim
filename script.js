window.onload = function() {

  //функция для частиц воды
  function particles(step, direction, range, speedMax, speedMin) {
    const particles = document.querySelectorAll(`g.step${step} .particles`);

    particles.forEach(element => {
      let param;
      let paramStart
      let paramRange;
      let duration = Math.floor(Math.random() * (speedMax - speedMin) + speedMin);
      let tag = element.tagName;
      if (direction == 'vertical') {
        if (tag == 'circle') {
          param = 'cy';          
        }

        if (tag == 'rect') {
          param = 'y';
        }
      }

      if (direction == 'horizontal') {
        if (tag == 'circle') {
          param = 'cx';
        }

        if (tag == 'rect') {
          param = 'x';
        }
      }

      paramStart = element.getAttribute(param);
      paramRange = +paramStart - range;

      anime({
        targets: element,
        [param]: [
          {value: paramStart},
          {value: paramRange}
        ],
        easing: 'linear',
        direction: 'alternate',
        duration: duration,
        loop: true
      })
      
    })
  }

  //функция для анимации стрелочек
  function arrows(pipeNumber, stagger) {
    let path = anime.path(`g.pipe${pipeNumber} path`);

    const arrows = document.querySelectorAll(`div.pipe${pipeNumber} .arrow`);

    anime({
      targets: arrows,
      translateX: path('x'),
      translateY: path('y'),
      rotate: path('angle'),
      opacity: [
        {value: 1},
        {value: 1},
        {value: 1},
        {value: 1},
        {value: 1},
        {value: 0}
      ],
      easing: 'linear',
      duration: 5000,
      loop: true,
      delay: anime.stagger(stagger),
    })
  }
  
  //1й шаг
  function step1() {
    // анимация волн
    anime({
      targets: 'g.step1 .water',
      d: [
        // { value: 'M212.344 132.221L227 99.0001C227 99.0001 187.787 106.725 162.5 105.5C141.113 104.464 129.858 94.4753 108.5 96C101.007 96.5349 89.5 99.0001 89.5 99.0001L104.232 132.329C113.817 154.013 135.293 168 159 168C182.203 167.389 202.975 153.457 212.344 132.221Z'},
        { value: 'M212.344 132.221L227 99.0001C227 99.0001 206.787 106.725 181.5 105.5C160.113 104.464 145.813 89.2289 125.5 96C97 105.5 89.5 99.0001 89.5 99.0001L104.232 132.329C113.817 154.013 135.293 168 159 168C182.203 167.389 202.975 153.457 212.344 132.221Z'},
        { value: 'M212.344 132.221L227 99.0001C227 99.0001 222.787 106.725 197.5 105.5C176.113 104.464 174.813 89.2289 154.5 96C126 105.5 89.5 99.0001 89.5 99.0001L104.232 132.329C113.817 154.013 135.293 168 159 168C182.203 167.389 202.975 153.457 212.344 132.221Z'},
        { value: 'M212.344 132.221L227 99.0001C227 99.0001 230 99.0001 219.5 96.5C198.852 91.5837 190.813 94.2289 170.5 101C142 110.5 89.5 99.0001 89.5 99.0001L104.232 132.329C113.817 154.013 135.293 168 159 168C182.203 167.389 202.975 153.457 212.344 132.221Z'}
      ],
      easing: 'linear',
      direction: 'alternate',
      duration: 2000,
      loop: true
    });

    //анимация частиц воды
    particles('1', 'horizontal', 10, 7000, 4000)

    // анимация стрелочек
    arrows('1', 1000);
  }

  //2й шаг
  function step2() {
    //анимация вращения
    anime({
      targets: 'g.step2 .toggle',
      
      d: [
        // { value: 'M323.181 62.9181L329.545 70.5007M340.455 83.4994L346.819 91.0819M349.082 65.1806L341.499 71.5449M328.501 82.4552L320.918 88.8195' },
        { value: 'M336.6 58.685L335.738 68.5469M334.262 85.4531L333.4 95.315M353.315 78.5998L343.453 77.7384M326.547 76.2616L316.685 75.4002' },
        { value: 'M349.082 65.1805L341.499 71.5448M328.501 82.4552L320.918 88.8194M346.819 91.0819L340.455 83.4994M329.545 70.5006L323.18 62.9181' },
        { value: 'M353.315 78.5999L343.453 77.7384M326.547 76.2617L316.685 75.4002M333.4 95.3151L334.262 85.4531M335.738 68.5469L336.6 58.685' },
        { value: 'M346.819 91.0819L340.455 83.4994M329.545 70.5007L323.18 62.9181M320.918 88.8195L328.501 82.4551M341.499 71.5449L349.082 65.1805'},
        { value: 'M333.4 95.3151L334.262 85.4532M335.738 68.547L336.6 58.685M316.685 75.4003L326.547 76.2617M343.453 77.7384L353.315 78.5998' },
        { value: 'M320.918 88.8196L328.501 82.4553M341.499 71.545L349.082 65.1807M323.18 62.9182L329.545 70.5008M340.455 83.4995L346.819 91.082' },
        { value: 'M316.685 75.4003L326.547 76.2618M343.453 77.7385L353.315 78.5999M336.6 58.6851L335.738 68.547M334.262 85.4533L333.4 95.3152' },
        { value: 'M323.18 62.9183L329.545 70.5008M340.455 83.4995L346.819 91.0821M349.082 65.1807L341.499 71.545M328.501 82.4553L320.918 88.8197' }
      ],
      easing: 'linear',
      // direction: 'alternate',
      duration: 5000,
      loop: true,
    })

    // анимация стрелочек
    arrows('2', 2000);
  }

  //3й шаг
  function step3() {
    //анимация частиц
    particles('3', 'vertical', 10, 5000, 1000);

    //анимация капель
    const drops = document.querySelectorAll('g.step3 .drop');

    drops.forEach(element => {
      let y = element.getAttribute('cy');
      const yTop = +y + 10;
      const delay = Math.floor(Math.random() * (3000 - 1000) + 1000);

      anime({
        targets: element,
        cy: [
          { value: y },
          { value: yTop },
        ],
        fill: [

          { value: '#1074b8'},
          { value: '#69cae1' }
        ],
        easing: 'linear',
        delay: delay,
        loop: true,
      });
    });

    // анимация стрелочек
    arrows('3', 1500);
  } 

  function step4() {
    // анимация стрелочек
    arrows('4', 1000);
  }

  function step5() {
    //анимация частиц воды
    particles('5', 'horizontal', 10, 7000, 4000);    

    // анимация стрелочек
    arrows('5', 1000);
  }

  function step6() {
    //анимация вращения
    anime({
      targets: 'g.step6 .toggle',
      d: [
        // { value: 'M563.181 384.918L569.545 392.501M580.455 405.499L586.819 413.082M589.082 387.181L581.499 393.545M568.501 404.455L560.918 410.82' },
        { value: 'M556.685 397.4L566.547 398.262M583.453 399.738L593.315 400.6M576.6 380.685L575.738 390.547M574.262 407.453L573.4 417.315' },
        { value: 'M560.918 410.819L568.501 404.455M581.499 393.545L589.082 387.181M563.18 384.918L569.545 392.501M580.455 405.499L586.819 413.082' },
        { value: 'M573.4 417.315L574.262 407.453M575.738 390.547L576.6 380.685M556.685 397.4L566.547 398.262M583.453 399.738L593.315 400.6' },
        { value: 'M586.819 413.082L580.455 405.499M569.545 392.501L563.18 384.918M560.918 410.819L568.501 404.455M581.499 393.545L589.082 387.18' },
        { value: 'M593.315 400.6L583.453 399.738M566.547 398.262L556.685 397.4M573.4 417.315L574.262 407.453M575.738 390.547L576.6 380.685' },
        { value: 'M589.082 387.181L581.499 393.545M568.501 404.455L560.918 410.819M586.819 413.082L580.455 405.499M569.545 392.501L563.18 384.918' },
        { value: 'M576.6 380.685L575.738 390.547M574.262 407.453L573.4 417.315M593.315 400.6L583.453 399.738M566.547 398.262L556.685 397.4' },
        { value: 'M563.18 384.918L569.545 392.501M580.455 405.499L586.819 413.082M589.082 387.18L581.499 393.545M568.501 404.455L560.918 410.819' }
        
      ],
      easing: 'linear',
      duration: 5000,
      loop: true,
    })

    // анимация стрелочек
    arrows('6', 1000);
  }

  function step7() {
    // анимация стрелочек
    arrows('7', 1000);
  }

  function step8_1() {
    // анимация стрелочек
    arrows('8-1', 1000);
  }

  function step8_2() {
    // анимация стрелочек
    arrows('8-2', 1000);
  }

  function step9() {
    //анимация капель
    const drops = document.querySelectorAll('g.step9 .drop');

    drops.forEach(element => {
      let y = element.getAttribute('cy');
      const yTop = +y + 25;
      const delay = Math.floor(Math.random() * (3000 - 1000) + 1000);

      anime({
        targets: element,
        cy: [
          { value: y },
          { value: yTop },
        ],
        fill: [
          { value: '#1074b8'}
        ],
        easing: 'linear',
        delay: delay,
        loop: true,
      });
    });
  }

  function step10_1() {
    // анимация стрелочек
    arrows('10-1', 2000);
  }

  function step10_2() {
    // анимация стрелочек
    arrows('10-2', 1500);
  }

  function step10_3() {
    // анимация стрелочек
    arrows('10-3', 1000);
  }

  function step11() {
    //анимация вращения
    anime({
      targets: 'g.step11 .toggle',
      d: [
        // { value: 'M647.181 669.918L653.545 677.501M664.455 690.499L670.819 698.082M673.082 672.181L665.499 678.545M652.501 689.455L644.918 695.82' },
        { value: 'M640.685 682.4L650.547 683.262M667.453 684.738L677.315 685.6M660.6 665.685L659.738 675.547M658.262 692.453L657.4 702.315' },
        { value: 'M644.918 695.819L652.501 689.455M665.499 678.545L673.082 672.181M647.181 669.918L653.545 677.501M664.455 690.499L670.819 698.082' },
        { value: 'M657.4 702.315L658.262 692.453M659.738 675.547L660.6 665.685M640.685 682.4L650.547 683.262M667.453 684.738L677.315 685.6' },
        { value: 'M670.819 698.082L664.455 690.499M653.545 677.501L647.181 669.918M644.918 695.819L652.501 689.455M665.499 678.545L673.082 672.18' },
        { value: 'M677.315 685.6L667.453 684.738M650.547 683.262L640.685 682.4M657.4 702.315L658.262 692.453M659.738 675.547L660.6 665.685' },
        { value: 'M673.082 672.181L665.499 678.545M652.501 689.455L644.918 695.819M670.819 698.082L664.455 690.499M653.545 677.501L647.18 669.918' },
        { value: 'M660.6 665.685L659.738 675.547M658.262 692.453L657.4 702.315M677.315 685.6L667.453 684.738M650.547 683.262L640.685 682.4' },
        { value: 'M647.181 669.918L653.545 677.501M664.455 690.499L670.819 698.082M673.082 672.181L665.499 678.545M652.501 689.455L644.918 695.819' }
        
      ],
      easing: 'linear',
      duration: 5000,
      loop: true,
    })

    // анимация стрелочек
    arrows('11', 2000);    
  }

  function step12() {
    // анимация стрелочек
    arrows('12', 1500);    
  }

  function step13() {
    //анимация частиц
    particles('13', 'horizontal', 2, 1000, 500);

    // анимация стрелочек
    arrows('13', 1500);
  }

  function step14() {
    // анимация стрелочек
    arrows('14', 1500);
  }

  function step15() {
    //анимация частиц
    particles('15', 'vertical', 10, 5000, 1000);

    // анимация стрелочек
    arrows('15', 1500); 
  }

  function step16() {
    // анимация стрелочек
    arrows('16', 1500); 

    //анимация вращения
    anime({
      targets: 'g.step16 .toggle1',
      
      d: [
        // { value: 'M617.072 913.03L620.828 906.454C621.292 905.64 622.367 905.42 623.114 905.986C624.049 906.693 624.878 907.53 625.578 908.471C626.137 909.224 625.907 910.296 625.089 910.753L618.48 914.45L618.829 915.512L618.47 916.572L625.047 920.327C625.86 920.792 626.08 921.866 625.515 922.613C624.807 923.548 623.97 924.378 623.029 925.077C622.277 925.636 621.204 925.407 620.747 924.589L617.05 917.979L615.988 918.328L614.929 917.97L611.173 924.546C610.708 925.36 609.634 925.58 608.887 925.014C607.952 924.307 607.122 923.47 606.423 922.528C605.864 921.776 606.094 920.704 606.912 920.246L613.521 916.549L613.172 915.487L613.53 914.428L606.954 910.672C606.14 910.208 605.92 909.134 606.486 908.386C607.194 907.451 608.031 906.622 608.972 905.922C609.724 905.364 610.796 905.593 611.254 906.411L614.951 913.02L616.013 912.671L617.072 913.03Z' },
        { value: 'M617.675 913.391L623.004 908.011C623.664 907.346 624.759 907.411 625.334 908.151C626.054 909.076 626.639 910.1 627.07 911.19C627.416 912.061 626.916 913.037 626.008 913.267L618.667 915.128L618.729 916.244L618.109 917.174L623.489 922.504C624.155 923.164 624.089 924.258 623.349 924.833C622.424 925.553 621.401 926.138 620.311 926.57C619.439 926.915 618.463 926.416 618.233 925.508L616.372 918.167L615.256 918.229L614.326 917.608L608.996 922.989C608.337 923.654 607.242 923.589 606.667 922.849C605.947 921.923 605.362 920.9 604.93 919.81C604.585 918.939 605.084 917.963 605.993 917.732L613.334 915.872L613.272 914.756L613.892 913.825L608.512 908.496C607.846 907.836 607.911 906.742 608.651 906.166C609.577 905.446 610.6 904.862 611.69 904.43C612.561 904.084 613.538 904.584 613.768 905.492L615.628 912.833L616.744 912.771L617.675 913.391Z'},
        { value: 'M618.164 913.897L624.704 910.079C625.513 909.607 626.554 909.954 626.918 910.817C627.374 911.897 627.674 913.037 627.809 914.202C627.917 915.133 627.182 915.946 626.245 915.934L618.673 915.831L618.444 916.925L617.604 917.663L621.421 924.204C621.893 925.013 621.547 926.053 620.683 926.417C619.603 926.873 618.463 927.173 617.299 927.308C616.368 927.416 615.554 926.681 615.567 925.744L615.67 918.172L614.575 917.943L613.837 917.103L607.297 920.921C606.487 921.393 605.447 921.046 605.083 920.183C604.627 919.103 604.327 917.963 604.192 916.798C604.084 915.867 604.819 915.053 605.756 915.066L613.328 915.169L613.557 914.075L614.397 913.337L610.58 906.796C610.107 905.987 610.454 904.946 611.317 904.582C612.398 904.126 613.537 903.826 614.702 903.691C615.633 903.583 616.447 904.318 616.434 905.255L616.331 912.828L617.425 913.057L618.164 913.897Z' },
        { value: 'M618.505 914.511L625.81 912.517C626.714 912.27 627.63 912.874 627.758 913.802C627.919 914.964 627.913 916.142 627.742 917.302C627.606 918.229 626.685 918.825 625.783 918.57L618.496 916.511L617.991 917.509L616.989 918.004L618.984 925.31C619.23 926.214 618.626 927.129 617.698 927.258C616.536 927.418 615.358 927.413 614.198 927.242C613.271 927.105 612.675 926.185 612.93 925.283L614.989 917.995L613.991 917.491L613.496 916.489L606.19 918.483C605.286 918.73 604.371 918.126 604.243 917.198C604.082 916.036 604.087 914.858 604.258 913.698C604.395 912.77 605.315 912.175 606.217 912.429L613.505 914.489L614.009 913.491L615.011 912.995L613.017 905.69C612.77 904.786 613.374 903.871 614.303 903.742C615.464 903.581 616.643 903.587 617.803 903.758C618.73 903.894 619.326 904.815 619.071 905.717L617.011 913.004L618.009 913.509L618.505 914.511Z'},
        { value: 'M618.675 915.193L626.248 915.157C627.185 915.153 627.913 915.973 627.797 916.903C627.651 918.067 627.341 919.204 626.876 920.28C626.504 921.14 625.461 921.477 624.655 920.998L618.149 917.122L617.404 917.956L616.307 918.175L616.343 925.748C616.347 926.685 615.527 927.413 614.597 927.296C613.434 927.151 612.297 926.841 611.22 926.375C610.36 926.003 610.023 924.96 610.502 924.155L614.378 917.649L613.545 916.903L613.325 915.807L605.752 915.842C604.815 915.847 604.088 915.027 604.204 914.097C604.349 912.933 604.659 911.796 605.125 910.72C605.497 909.86 606.54 909.522 607.345 910.002L613.852 913.877L614.597 913.044L615.693 912.825L615.658 905.252C615.653 904.315 616.474 903.587 617.404 903.703C618.567 903.849 619.704 904.159 620.78 904.624C621.64 904.996 621.978 906.04 621.498 906.845L617.623 913.351L618.456 914.097L618.675 915.193Z' },
        { value: 'M618.664 915.896L625.988 917.821C626.894 918.06 627.384 919.04 627.031 919.909C626.59 920.995 625.996 922.013 625.268 922.932C624.686 923.666 623.591 923.722 622.937 923.051L617.656 917.623L616.72 918.235L615.604 918.163L613.679 925.487C613.441 926.394 612.46 926.884 611.592 926.531C610.505 926.09 609.488 925.496 608.568 924.768C607.834 924.186 607.778 923.091 608.45 922.437L613.877 917.156L613.265 916.22L613.337 915.104L606.013 913.178C605.106 912.94 604.616 911.959 604.969 911.091C605.411 910.005 606.004 908.987 606.732 908.068C607.314 907.333 608.409 907.278 609.063 907.949L614.345 913.376L615.28 912.765L616.396 912.837L618.322 905.512C618.56 904.606 619.541 904.116 620.409 904.469C621.495 904.91 622.513 905.504 623.432 906.232C624.167 906.814 624.223 907.909 623.551 908.563L618.124 913.844L618.736 914.78L618.664 915.896Z'},
        { value: 'M618.471 916.572L625.047 920.327C625.86 920.792 626.08 921.866 625.515 922.613C624.807 923.548 623.97 924.378 623.029 925.077C622.277 925.636 621.204 925.407 620.747 924.589L617.05 917.979L615.988 918.328L614.929 917.97L611.173 924.546C610.708 925.36 609.634 925.58 608.887 925.014C607.952 924.307 607.122 923.47 606.423 922.528C605.864 921.776 606.094 920.704 606.912 920.246L613.521 916.55L613.172 915.487L613.53 914.428L606.954 910.673C606.14 910.208 605.92 909.134 606.486 908.386C607.194 907.452 608.031 906.622 608.972 905.923C609.724 905.364 610.796 905.593 611.254 906.411L614.951 913.02L616.013 912.671L617.072 913.03L620.828 906.454C621.293 905.64 622.367 905.42 623.114 905.986C624.049 906.693 624.878 907.53 625.578 908.471C626.137 909.224 625.907 910.296 625.089 910.753L618.48 914.45L618.829 915.512L618.471 916.572Z' },        
      ],
      easing: 'linear',
      // direction: 'alternate',
      duration: 2000,
      loop: true,
    })

    anime({
      targets: 'g.step16 .toggle2',
      
      d: [
        { value: 'M660.109 917.174L665.489 922.504C666.155 923.164 666.089 924.258 665.349 924.834C664.424 925.553 663.4 926.138 662.31 926.57C661.439 926.915 660.463 926.416 660.233 925.508L658.372 918.167L657.256 918.229L656.326 917.608L650.996 922.988C650.337 923.654 649.242 923.589 648.667 922.849C647.947 921.923 647.362 920.9 646.93 919.81C646.585 918.939 647.084 917.963 647.993 917.732L655.333 915.872L655.271 914.756L655.892 913.825L650.512 908.496C649.846 907.836 649.911 906.742 650.651 906.166C651.577 905.446 652.6 904.862 653.69 904.43C654.561 904.085 655.538 904.584 655.768 905.492L657.628 912.833L658.744 912.771L659.675 913.391L665.004 908.011C665.664 907.346 666.759 907.411 667.334 908.151C668.054 909.076 668.638 910.1 669.07 911.19C669.416 912.061 668.916 913.037 668.008 913.267L660.667 915.128L660.729 916.244L660.109 917.174Z' },
        { value: 'M659.604 917.663L663.421 924.204C663.893 925.013 663.547 926.053 662.683 926.418C661.603 926.873 660.463 927.173 659.298 927.308C658.367 927.416 657.554 926.681 657.566 925.744L657.669 918.172L656.575 917.943L655.837 917.103L649.297 920.921C648.487 921.393 647.447 921.046 647.083 920.183C646.627 919.103 646.327 917.963 646.192 916.798C646.084 915.867 646.819 915.053 647.756 915.066L655.328 915.169L655.557 914.075L656.397 913.337L652.58 906.796C652.107 905.987 652.454 904.947 653.317 904.582C654.398 904.126 655.537 903.827 656.702 903.691C657.633 903.583 658.447 904.318 658.434 905.255L658.331 912.828L659.425 913.057L660.163 913.897L666.704 910.079C667.513 909.607 668.554 909.954 668.918 910.817C669.374 911.897 669.674 913.037 669.809 914.202C669.917 915.133 669.182 915.946 668.245 915.934L660.672 915.831L660.443 916.925L659.604 917.663Z' },
        { value: 'M658.989 918.004L660.983 925.31C661.23 926.214 660.626 927.129 659.698 927.258C658.536 927.418 657.358 927.413 656.198 927.242C655.271 927.105 654.675 926.185 654.93 925.283L656.989 917.995L655.991 917.491L655.496 916.489L648.19 918.483C647.286 918.73 646.371 918.126 646.243 917.198C646.082 916.036 646.087 914.858 646.258 913.698C646.395 912.77 647.315 912.175 648.217 912.429L655.505 914.489L656.009 913.491L657.011 912.995L655.017 905.69C654.77 904.786 655.374 903.871 656.302 903.742C657.464 903.582 658.642 903.587 659.802 903.758C660.73 903.894 661.325 904.815 661.071 905.717L659.011 913.004L660.009 913.509L660.505 914.511L667.81 912.517C668.714 912.27 669.63 912.874 669.758 913.802C669.919 914.964 669.913 916.142 669.742 917.302C669.606 918.229 668.685 918.825 667.783 918.57L660.496 916.511L659.991 917.509L658.989 918.004Z'},
        { value: 'M658.307 918.175L658.343 925.748C658.347 926.685 657.527 927.412 656.597 927.296C655.433 927.151 654.296 926.841 653.22 926.375C652.36 926.003 652.023 924.96 652.502 924.155L656.378 917.649L655.545 916.903L655.325 915.807L647.752 915.842C646.815 915.847 646.088 915.027 646.204 914.097C646.349 912.933 646.659 911.796 647.125 910.72C647.497 909.86 648.54 909.522 649.345 910.002L655.851 913.877L656.597 913.044L657.693 912.825L657.658 905.252C657.653 904.315 658.474 903.587 659.403 903.703C660.567 903.849 661.704 904.159 662.78 904.624C663.64 904.996 663.978 906.04 663.498 906.845L659.623 913.351L660.456 914.097L660.675 915.193L668.248 915.157C669.185 915.153 669.913 915.973 669.797 916.903C669.651 918.067 669.341 919.204 668.876 920.28C668.504 921.14 667.461 921.477 666.655 920.998L660.149 917.122L659.404 917.956L658.307 918.175Z' },
        { value: 'M657.604 918.163L655.679 925.487C655.44 926.394 654.46 926.884 653.592 926.531C652.505 926.089 651.487 925.496 650.568 924.768C649.834 924.186 649.778 923.091 650.45 922.437L655.877 917.156L655.265 916.22L655.337 915.104L648.013 913.178C647.107 912.94 646.616 911.959 646.969 911.091C647.411 910.005 648.004 908.987 648.732 908.068C649.314 907.333 650.409 907.278 651.063 907.949L656.345 913.376L657.28 912.765L658.396 912.837L660.322 905.512C660.56 904.606 661.541 904.116 662.409 904.469C663.495 904.91 664.513 905.504 665.432 906.232C666.167 906.814 666.223 907.909 665.551 908.563L660.124 913.844L660.736 914.78L660.664 915.896L667.988 917.821C668.894 918.06 669.385 919.04 669.032 919.909C668.59 920.995 667.996 922.013 667.268 922.932C666.686 923.666 665.591 923.722 664.938 923.051L659.656 917.623L658.72 918.235L657.604 918.163Z' },
        { value: 'M656.929 917.97L653.173 924.546C652.708 925.36 651.634 925.58 650.887 925.014C649.952 924.306 649.122 923.469 648.423 922.528C647.864 921.776 648.093 920.704 648.911 920.246L655.521 916.55L655.172 915.487L655.53 914.428L648.954 910.673C648.14 910.208 647.92 909.134 648.486 908.386C649.194 907.452 650.031 906.622 650.972 905.923C651.724 905.364 652.796 905.593 653.254 906.411L656.951 913.02L658.013 912.671L659.072 913.03L662.828 906.454C663.292 905.64 664.366 905.42 665.114 905.985C666.049 906.693 666.878 907.53 667.578 908.471C668.137 909.224 667.907 910.296 667.089 910.753L660.48 914.45L660.829 915.513L660.47 916.572L667.047 920.327C667.86 920.792 668.08 921.866 667.515 922.613C666.807 923.548 665.97 924.378 665.029 925.077C664.277 925.636 663.204 925.407 662.747 924.589L659.05 917.979L657.988 918.328L656.929 917.97Z' },
        
      ],
      easing: 'linear',
      duration: 2000,
      loop: true,
    })

    anime({
      targets: 'g.step16 .toggle3',
      
      d: [
        { value: 'M702.109 917.174L707.489 922.504C708.155 923.164 708.089 924.258 707.349 924.834C706.424 925.553 705.401 926.138 704.31 926.57C703.439 926.915 702.463 926.416 702.233 925.508L700.373 918.167L699.256 918.229L698.326 917.609L692.996 922.989C692.337 923.654 691.242 923.589 690.667 922.849C689.947 921.923 689.362 920.9 688.93 919.81C688.585 918.939 689.084 917.963 689.993 917.732L697.334 915.872L697.272 914.756L697.892 913.825L692.512 908.496C691.846 907.836 691.911 906.742 692.651 906.166C693.577 905.447 694.6 904.862 695.69 904.43C696.561 904.085 697.538 904.584 697.768 905.492L699.628 912.833L700.745 912.771L701.675 913.391L707.005 908.011C707.664 907.346 708.759 907.411 709.334 908.151C710.054 909.076 710.639 910.1 711.071 911.19C711.416 912.061 710.917 913.037 710.008 913.267L702.667 915.128L702.729 916.244L702.109 917.174Z' },
        { value: 'M701.604 917.663L705.421 924.204C705.893 925.013 705.547 926.053 704.683 926.418C703.603 926.873 702.463 927.173 701.298 927.308C700.368 927.416 699.554 926.682 699.567 925.744L699.67 918.172L698.575 917.943L697.837 917.103L691.297 920.921C690.487 921.393 689.447 921.046 689.083 920.183C688.627 919.103 688.327 917.963 688.192 916.798C688.084 915.867 688.819 915.053 689.756 915.066L697.328 915.169L697.557 914.075L698.397 913.337L694.58 906.796C694.107 905.987 694.454 904.947 695.317 904.582C696.398 904.127 697.537 903.827 698.702 903.692C699.633 903.584 700.447 904.318 700.434 905.256L700.331 912.828L701.425 913.057L702.164 913.897L708.704 910.079C709.514 909.607 710.554 909.954 710.918 910.817C711.374 911.897 711.674 913.037 711.809 914.202C711.917 915.133 711.182 915.946 710.245 915.934L702.673 915.831L702.444 916.925L701.604 917.663Z' },
        { value: 'M700.989 918.004L702.984 925.31C703.23 926.214 702.626 927.129 701.698 927.258C700.536 927.418 699.358 927.413 698.198 927.242C697.271 927.105 696.675 926.185 696.93 925.283L698.989 917.995L697.991 917.491L697.496 916.489L690.19 918.483C689.286 918.73 688.371 918.126 688.243 917.198C688.082 916.036 688.087 914.858 688.258 913.698C688.395 912.771 689.315 912.175 690.217 912.43L697.505 914.489L698.009 913.491L699.012 912.996L697.017 905.69C696.77 904.786 697.374 903.871 698.303 903.742C699.464 903.582 700.643 903.587 701.803 903.758C702.73 903.895 703.326 904.815 703.071 905.717L701.012 913.004L702.009 913.509L702.505 914.511L709.81 912.517C710.715 912.27 711.63 912.874 711.758 913.802C711.919 914.964 711.913 916.142 711.742 917.302C711.606 918.229 710.685 918.825 709.784 918.57L702.496 916.511L701.991 917.509L700.989 918.004Z' },
        { value: 'M700.307 918.175L700.343 925.748C700.347 926.685 699.527 927.413 698.597 927.296C697.434 927.151 696.297 926.841 695.22 926.375C694.36 926.003 694.023 924.96 694.502 924.155L698.378 917.649L697.545 916.903L697.325 915.807L689.752 915.842C688.815 915.847 688.088 915.027 688.204 914.097C688.349 912.933 688.659 911.796 689.125 910.72C689.497 909.86 690.54 909.522 691.345 910.002L697.852 913.877L698.597 913.044L699.693 912.825L699.658 905.252C699.653 904.315 700.474 903.587 701.404 903.703C702.567 903.849 703.704 904.159 704.78 904.624C705.64 904.996 705.978 906.04 705.498 906.845L701.623 913.351L702.456 914.097L702.675 915.193L710.248 915.157C711.185 915.153 711.913 915.973 711.797 916.903C711.651 918.067 711.341 919.204 710.876 920.28C710.504 921.14 709.461 921.477 708.655 920.998L702.149 917.122L701.404 917.956L700.307 918.175Z' },
        { value: 'M699.605 918.163L697.679 925.487C697.441 926.394 696.46 926.884 695.592 926.531C694.506 926.09 693.488 925.496 692.568 924.768C691.834 924.186 691.778 923.091 692.45 922.437L697.877 917.156L697.265 916.22L697.337 915.104L690.013 913.178C689.107 912.94 688.616 911.96 688.969 911.091C689.411 910.005 690.005 908.987 690.733 908.068C691.315 907.333 692.41 907.278 693.063 907.949L698.345 913.377L699.28 912.765L700.396 912.837L702.322 905.512C702.56 904.606 703.541 904.116 704.409 904.469C705.495 904.91 706.513 905.504 707.432 906.232C708.167 906.814 708.223 907.909 707.551 908.563L702.124 913.844L702.736 914.78L702.664 915.896L709.988 917.821C710.894 918.06 711.385 919.04 711.032 919.909C710.59 920.995 709.996 922.013 709.268 922.932C708.686 923.666 707.591 923.722 706.938 923.051L701.656 917.623L700.72 918.235L699.605 918.163Z' },
        { value: 'M698.929 917.97L695.173 924.546C694.708 925.36 693.634 925.58 692.887 925.014C691.952 924.307 691.122 923.469 690.423 922.528C689.864 921.776 690.094 920.704 690.911 920.246L697.521 916.55L697.172 915.487L697.53 914.428L690.954 910.673C690.14 910.208 689.92 909.134 690.486 908.386C691.194 907.452 692.031 906.622 692.972 905.923C693.724 905.364 694.796 905.593 695.254 906.411L698.951 913.02L700.013 912.672L701.072 913.03L704.828 906.454C705.292 905.64 706.367 905.42 707.114 905.986C708.049 906.693 708.878 907.53 709.578 908.471C710.137 909.224 709.907 910.296 709.089 910.753L702.48 914.45L702.829 915.513L702.471 916.572L709.047 920.327C709.86 920.792 710.08 921.866 709.515 922.613C708.807 923.548 707.97 924.378 707.029 925.077C706.277 925.636 705.204 925.407 704.747 924.589L701.05 917.98L699.988 918.328L698.929 917.97Z' },
        
      ],
      easing: 'linear',
      duration: 2000,
      loop: true,
    })
  }

  function step17() {
    // анимация стрелочек
    arrows('17', 1000); 

    //анимация частиц
    const particles = document.querySelectorAll(`g.step17 .particles`);

    particles.forEach(element => {
      let duration = Math.floor(Math.random() * (5000 - 1000) + 1000);    

      anime({
        targets: element,
        translateX: [ '5px', '-5px' ],
        easing: 'linear',
        direction: 'alternate',
        duration: duration,
        loop: true
      })
      
    })
 
  }

  function step18() {
    //анимация частиц
    particles('18', 'horizontal', 10, 5000, 1000);

    // анимация волн
    anime({
      targets: 'g.step18 .water',
      d: [
        // { value: 'M636.836 1110.59L651.492 1077.36C651.492 1077.36 626.739 1079.86 615.992 1080.86C599.992 1082.36 562.253 1088.72 542.992 1079.36C525.492 1070.86 513.992 1077.36 513.992 1077.36L528.725 1110.69C538.31 1132.38 559.785 1146.36 583.492 1146.36C606.695 1145.75 627.467 1131.82 636.836 1110.59Z'},
        { value: 'M636.836 1110.59L651.492 1077.36C651.492 1077.36 643.992 1079.36 627.992 1080.86C611.992 1082.36 589.996 1079.53 568.992 1075.36C547.989 1071.2 513.992 1077.36 513.992 1077.36L528.725 1110.69C538.31 1132.38 559.785 1146.36 583.492 1146.36C606.695 1145.75 627.467 1131.82 636.836 1110.59Z'},
        { value: 'M636.836 1110.59L651.492 1077.36C651.492 1077.36 643.462 1085.21 627.992 1080.86C611.992 1076.36 598.484 1068.36 576.992 1075.36C555.5 1082.36 513.992 1077.36 513.992 1077.36L528.725 1110.69C538.31 1132.38 559.785 1146.36 583.492 1146.36C606.695 1145.75 627.467 1131.82 636.836 1110.59Z'},
        { value: 'M636.836 1110.59L651.492 1077.36C651.492 1077.36 646.5 1073.36 637 1073.36C617.508 1073.36 618.485 1072.36 596.992 1081.36C575.5 1090.36 513.992 1077.36 513.992 1077.36L528.725 1110.69C538.31 1132.38 559.785 1146.36 583.492 1146.36C606.695 1145.75 627.467 1131.82 636.836 1110.59Z'},
        
      ],
      easing: 'linear',
      direction: 'alternate',
      duration: 2000,
      loop: true
    });

    //анимация рыбки
    anime({
      targets: 'g.step18 .fish',
      d: [
        { value: 'M625.098 1107.7H625.09C624.626 1107.7 624.25 1108.07 624.25 1108.54C624.25 1109 624.626 1109.38 625.09 1109.38H625.098C625.562 1109.38 625.938 1109 625.938 1108.54C625.938 1108.07 625.562 1107.7 625.098 1107.7ZM625.09 1108.38C625.091 1108.38 625.092 1108.38 625.094 1108.38C625.095 1108.38 625.096 1108.38 625.098 1108.38C625.183 1108.38 625.25 1108.45 625.25 1108.54C625.25 1108.62 625.183 1108.69 625.098 1108.7C625.096 1108.7 625.095 1108.7 625.094 1108.7C625.092 1108.7 625.091 1108.7 625.09 1108.7C625.005 1108.69 624.938 1108.62 624.938 1108.54C624.938 1108.45 625.005 1108.38 625.09 1108.38ZM600.5 1105.09L606.19 1109.96L600.5 1114.03V1110V1105.09ZM609.094 1111.96L607.625 1110L608.891 1108.31C609.856 1107.03 611.032 1105.91 612.37 1105.02L612.507 1104.93C612.999 1104.6 613.515 1104.31 614.051 1104.06C616.187 1103.05 618.572 1102.7 620.907 1103.05L622.257 1103.25C623.299 1103.4 624.303 1103.75 625.217 1104.27L625.716 1104.56C626.649 1105.09 627.429 1105.85 627.981 1106.77C629.173 1108.76 629.173 1111.24 627.981 1113.23C627.429 1114.15 626.649 1114.91 625.716 1115.44L625.157 1115.76C624.278 1116.27 623.318 1116.61 622.32 1116.78L621.675 1116.9C619.466 1117.28 617.194 1117.06 615.098 1116.26L614.514 1116.04C613.661 1115.72 612.847 1115.3 612.088 1114.79C610.937 1114.02 609.924 1113.07 609.094 1111.96Z'},
        { value: 'M605.402 1107.7H605.41C605.874 1107.7 606.25 1108.07 606.25 1108.54C606.25 1109 605.874 1109.38 605.41 1109.38H605.402C604.938 1109.38 604.562 1109 604.562 1108.54C604.562 1108.07 604.938 1107.7 605.402 1107.7ZM605.41 1108.38C605.409 1108.38 605.408 1108.38 605.406 1108.38C605.405 1108.38 605.404 1108.38 605.402 1108.38C605.317 1108.38 605.25 1108.45 605.25 1108.54C605.25 1108.62 605.317 1108.69 605.402 1108.7C605.404 1108.7 605.405 1108.7 605.406 1108.7C605.408 1108.7 605.409 1108.7 605.41 1108.7C605.495 1108.69 605.562 1108.62 605.562 1108.54C605.562 1108.45 605.495 1108.38 605.41 1108.38ZM630 1105.09L624.31 1109.96L630 1114.03V1110V1105.09ZM621.406 1111.96L622.875 1110L621.609 1108.31C620.644 1107.03 619.468 1105.91 618.13 1105.02L617.993 1104.93C617.501 1104.6 616.985 1104.31 616.449 1104.06C614.313 1103.05 611.928 1102.7 609.593 1103.05L608.243 1103.25C607.201 1103.4 606.197 1103.75 605.283 1104.27L604.784 1104.56C603.851 1105.09 603.071 1105.85 602.519 1106.77C601.327 1108.76 601.327 1111.24 602.519 1113.23C603.071 1114.15 603.851 1114.91 604.784 1115.44L605.343 1115.76C606.222 1116.27 607.182 1116.61 608.18 1116.78L608.825 1116.9C611.034 1117.28 613.306 1117.06 615.402 1116.26L615.986 1116.04C616.839 1115.72 617.653 1115.3 618.412 1114.79C619.563 1114.02 620.576 1113.07 621.406 1111.96Z'},
        { value: 'M542.402 1107.7H542.41C542.874 1107.7 543.25 1108.07 543.25 1108.54C543.25 1109 542.874 1109.38 542.41 1109.38H542.402C541.938 1109.38 541.562 1109 541.562 1108.54C541.562 1108.07 541.938 1107.7 542.402 1107.7ZM542.41 1108.38C542.409 1108.38 542.408 1108.38 542.406 1108.38C542.405 1108.38 542.404 1108.38 542.402 1108.38C542.317 1108.38 542.25 1108.45 542.25 1108.54C542.25 1108.62 542.317 1108.69 542.402 1108.7C542.404 1108.7 542.405 1108.7 542.406 1108.7C542.408 1108.7 542.409 1108.7 542.41 1108.7C542.495 1108.69 542.562 1108.62 542.562 1108.54C542.562 1108.45 542.495 1108.38 542.41 1108.38ZM567 1105.09L561.31 1109.96L567 1114.03V1110V1105.09ZM558.406 1111.96L559.875 1110L558.609 1108.31C557.644 1107.03 556.468 1105.91 555.13 1105.02L554.993 1104.93C554.501 1104.6 553.985 1104.31 553.449 1104.06C551.313 1103.05 548.928 1102.7 546.593 1103.05L545.243 1103.25C544.201 1103.4 543.197 1103.75 542.283 1104.27L541.784 1104.56C540.851 1105.09 540.071 1105.85 539.519 1106.77C538.327 1108.76 538.327 1111.24 539.519 1113.23C540.071 1114.15 540.851 1114.91 541.784 1115.44L542.343 1115.76C543.222 1116.27 544.182 1116.61 545.18 1116.78L545.825 1116.9C548.034 1117.28 550.306 1117.06 552.402 1116.26L552.986 1116.04C553.839 1115.72 554.653 1115.3 555.412 1114.79C556.563 1114.02 557.576 1113.07 558.406 1111.96Z'},
        { value: 'M562.098 1107.7H562.09C561.626 1107.7 561.25 1108.07 561.25 1108.54C561.25 1109 561.626 1109.38 562.09 1109.38H562.098C562.562 1109.38 562.938 1109 562.938 1108.54C562.938 1108.07 562.562 1107.7 562.098 1107.7ZM562.09 1108.38C562.091 1108.38 562.092 1108.38 562.094 1108.38C562.095 1108.38 562.096 1108.38 562.098 1108.38C562.183 1108.38 562.25 1108.45 562.25 1108.54C562.25 1108.62 562.183 1108.69 562.098 1108.7C562.096 1108.7 562.095 1108.7 562.094 1108.7C562.092 1108.7 562.091 1108.7 562.09 1108.7C562.005 1108.69 561.938 1108.62 561.938 1108.54C561.938 1108.45 562.005 1108.38 562.09 1108.38ZM537.5 1105.09L543.19 1109.96L537.5 1114.03V1110V1105.09ZM546.094 1111.96L544.625 1110L545.891 1108.31C546.856 1107.03 548.032 1105.91 549.37 1105.02L549.507 1104.93C549.999 1104.6 550.515 1104.31 551.051 1104.06C553.187 1103.05 555.572 1102.7 557.907 1103.05L559.257 1103.25C560.299 1103.4 561.303 1103.75 562.217 1104.27L562.716 1104.56C563.649 1105.09 564.429 1105.85 564.981 1106.77C566.173 1108.76 566.173 1111.24 564.981 1113.23C564.429 1114.15 563.649 1114.91 562.716 1115.44L562.157 1115.76C561.278 1116.27 560.318 1116.61 559.32 1116.78L558.675 1116.9C556.466 1117.28 554.194 1117.06 552.098 1116.26L551.514 1116.04C550.661 1115.72 549.847 1115.3 549.088 1114.79C547.937 1114.02 546.924 1113.07 546.094 1111.96Z'},
      ],
      easing: 'linear',
      loop: true,
      duration: 7000
    })
  }

  step1();
  step2();
  step3();  
  step4();
  step5();
  step6();
  step7();
  step8_1();
  step8_2();
  step9();
  step10_1();
  step10_2();
  step10_3()
  step11();
  step12();
  step13();
  step14();
  step15();
  step16();
  step17();
  step18();
}